#!/usr/bin/env zsh
# @(#)[:G+eduCMfuZ4~cz%gTH!C: 2016/11/28 03:25:11 tw@csongor.lan]
# vim: filetype=zsh tabstop=4 textwidth=72 noexpandtab

emulate -L zsh
setopt local_options local_traps pipe_fail bsd_echo

print -Pu 2 ' %F{4}>>>%f %BRefiling%b %F{5}root@yt.lan%f.'
msg:from '@yt\.lan' 2>/dev/null
(($#MSGs))&& { refile -unlink $MSGs +yt.lan }

print -Pu 2 ' %F{4}>>>%f %BRefiling%b %F{5}root@yt.lan%f.'
msg:from 'root@csongor\.lan' 2>/dev/null
(($#MSGs))&& { refile -unlink $MSGs +root@csongor.lan }

print -Pu 2 ' %F{4}>>>%f %BRefiling%b %F{5}Notes to Self%f.'
msg:to 'bgumm102@gmail\.com' 2>/dev/null
(($#MSGs))&& { refile -unlink $MSGs +notes; }

print -Pu 2 ' %F{4}>>>%f %BRemoving%b everything else.'
msg:from 2>/dev/null
(($#MSGs))&& { rmm $MSGs; }

print -Pu 2 ' %F{4}>>>%f %BCleaning%b mail workshop.'
typeset -- revert=false
[[ -o null_glob ]]|| {
	setopt null_glob
	revert=true
  }
typeset -a files2delete=( $XDG_CACHE_HOME/mail/*(.) )
(($#files2delete))&& rm $files2delete
$revert && setopt no_null_glob

# Copyright Â© 2016 by Tom Davis <tom@greyshirt.net>.
